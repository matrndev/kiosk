<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Document</title>
    <link rel="stylesheet" href="../static/css/styles.css">
</head>

<body>
    <div class="columns">
        <div class="ml-3 column is-one-quarter" style="border-right: 2px dotted;">
            <figure class="image">
                <img src="../static/images/items/{{item_id}}.jpg" alt="item image">
            </figure>
            <p class="is-size-3" style="text-align: center;">{{item_name}}</p>
            <div class="content has-text-weight-light">
                <ul>
                    {% for pmod in previous_modifications %}
                        <li>{{pmod}}</li>
                    {% endfor %}
                </ul>
            </div>
        </div>
        <div class="column">
            <h1 style="text-align: center;" class="is-size-3 has-text-weight-bold">Edit item</h1><br>
            <div class="columns has-text-centered pr-2">
                {% for modification in modifications[:3] %}
                    <div class="column is-one-third">
                        <div class="card">
                            <div class="card-image">
                                <figure class="image is-256x256">
                                    <img src="../static/images/items/{{modification.id}}.jpg"
                                        alt="image">
                                </figure>
                            </div>
                            <div class="card-content">
                                <p class="title has-text-weight-normal">{{modification.name}}</p>
                                <p class="subtitle has-text-weight-light">+ {{modification.price}} EUR</p>
                            </div>
                            <footer class="card-footer">
                                {% if not section in required %}
                                    <a onclick="global_loading_bar()"href="/items/append_modification?item_id={{item_id}}&modification_id={{modification.id}}&next_section={{next_section}}" class="card-footer-item is-size-5">Add</a>
                                    <a onclick="global_loading_bar()"href="/items/append_modification?item_id={{item_id}}&modification_id={{modification.id}}&next_section={{next_section}}&subtract=1" class="card-footer-item is-size-5">Remove</a>
                                {% else %}
                                    <a onclick="global_loading_bar()"href="/items/append_modification?item_id={{item_id}}&modification_id={{modification.id}}&next_section={{next_section}}" class="card-footer-item is-size-5">Select</a>
                                {% endif %}
                            </footer>
                        </div>
                    </div>
                {% endfor %}
            <div class="columns has-text-centered pr-2">
                {% for modification in modifications[3:] %}
                    <div class="column is-one-third">
                        <div class="card">
                            <div class="card-image">
                                <figure class="image is-256x256">
                                    <img src="../static/images/items/{{modification.id}}.jpg"
                                        alt="image">
                                </figure>
                            </div>
                            <div class="card-content">
                                <p class="title has-text-weight-normal">{{modification.name}}</p>
                                <p class="subtitle has-text-weight-light">+ {{modification.price}} EUR</p>
                            </div>
                            <footer class="card-footer">
                                <a onclick="global_loading_bar()"href="/items/append_modification?item_id={{item_id}}&modification_id={{modification.id}}&next_section={{next_section}}" class="card-footer-item">Select</a>
                            </footer>
                        </div>
                    </div>
                {% endfor %}
                
                
            </div>
        </div>
    </div>


    <br><br>
    <nav class="navbar is-fixed-bottom">
        <div class="navbar-menu">
            <div class="navbar-start">
                <a onclick="global_loading_bar()" href="/order/cancel" class="navbar-item button is-danger is-medium has-text-weight-bold m-1 is-light">CANCEL ORDER</a>
            </div>
            <div class="navbar-end">
                {% if not section in required %}
                    <a onclick="global_loading_bar()"href="/items/append_modification?item_id={{item_id}}&next_section={{next_section+1}}" class="is-light navbar-item button is-primary is-medium has-text-weight-bold m-1">CONTINUE</a>
                {% endif %}
            </div>
        </div>
    </nav>


    <div id="global-loading-bar" class="modal">
		<div class="modal-background"></div>
		<div class="modal-content">
			<div class="box has-text-centered">
				<p class="is-size-3 has-text-black-ter has-text-weight-bold">Please wait...</p>
				<br>
				<progress class="progress is-large is-info" max="100"></progress>
			</div>
		</div>
	</div>
	<script>
		function global_loading_bar() {
			document.getElementById("global-loading-bar").classList = "modal is-active"
			setTimeout(() => {
				document.getElementById("global-loading-bar").classList = "modal"
			}, 5000);
		}
	</script>
</body>

</html>